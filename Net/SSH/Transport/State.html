<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: Net::SSH::Transport::State</title>

	<link rel="stylesheet" href="../../../rdoc.css" type="text/css" media="screen" />

	<script src="../../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../../lib/net/ssh/transport/state_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/net/ssh/transport/state.rb">lib/net/ssh/transport/state.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">Object</p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#M000379">::new</a></li>
					
					<li><a href="#M000397">#cleanup</a></li>
					
					<li><a href="#M000394">#compress</a></li>
					
					<li><a href="#M000393">#compression?</a></li>
					
					<li><a href="#M000389">#compressor</a></li>
					
					<li><a href="#M000395">#decompress</a></li>
					
					<li><a href="#M000390">#decompressor</a></li>
					
					<li><a href="#M000387">#final_cipher</a></li>
					
					<li><a href="#M000388">#increment</a></li>
					
					<li><a href="#M000403">#needs_rekey?</a></li>
					
					<li><a href="#M000396">#reset!</a></li>
					
					<li><a href="#M000380">#set</a></li>
					
					<li><a href="#M000381">#update_cipher</a></li>
					
					<li><a href="#M000404">#update_next_iv</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../../CHANGELOG_rdoc.html">CHANGELOG.rdoc</a></li>
				
					<li class="file"><a href="../../../README_rdoc.html">README.rdoc</a></li>
				
					<li class="file"><a href="../../../THANKS_rdoc.html">THANKS.rdoc</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../../Net.html">Net</a></li>
				
					<li><a href="../../../Net/SSH.html">Net::SSH</a></li>
				
					<li><a href="../../../Net/SSH/Authentication.html">Net::SSH::Authentication</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Agent.html">Net::SSH::Authentication::Agent</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Agent/Comment.html">Net::SSH::Authentication::Agent::Comment</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/AgentError.html">Net::SSH::Authentication::AgentError</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/AgentNotAvailable.html">Net::SSH::Authentication::AgentNotAvailable</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Constants.html">Net::SSH::Authentication::Constants</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/KeyManager.html">Net::SSH::Authentication::KeyManager</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/KeyManagerError.html">Net::SSH::Authentication::KeyManagerError</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Methods.html">Net::SSH::Authentication::Methods</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Methods/Abstract.html">Net::SSH::Authentication::Methods::Abstract</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Methods/Hostbased.html">Net::SSH::Authentication::Methods::Hostbased</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Methods/KeyboardInteractive.html">Net::SSH::Authentication::Methods::KeyboardInteractive</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Methods/Password.html">Net::SSH::Authentication::Methods::Password</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Methods/Publickey.html">Net::SSH::Authentication::Methods::Publickey</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Pageant.html">Net::SSH::Authentication::Pageant</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Pageant/Socket.html">Net::SSH::Authentication::Pageant::Socket</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Pageant/Win.html">Net::SSH::Authentication::Pageant::Win</a></li>
				
					<li><a href="../../../Net/SSH/Authentication/Session.html">Net::SSH::Authentication::Session</a></li>
				
					<li><a href="../../../Net/SSH/AuthenticationFailed.html">Net::SSH::AuthenticationFailed</a></li>
				
					<li><a href="../../../Net/SSH/Buffer.html">Net::SSH::Buffer</a></li>
				
					<li><a href="../../../Net/SSH/BufferedIo.html">Net::SSH::BufferedIo</a></li>
				
					<li><a href="../../../Net/SSH/ChannelOpenFailed.html">Net::SSH::ChannelOpenFailed</a></li>
				
					<li><a href="../../../Net/SSH/ChannelRequestFailed.html">Net::SSH::ChannelRequestFailed</a></li>
				
					<li><a href="../../../Net/SSH/Config.html">Net::SSH::Config</a></li>
				
					<li><a href="../../../Net/SSH/Connection.html">Net::SSH::Connection</a></li>
				
					<li><a href="../../../Net/SSH/Connection/Channel.html">Net::SSH::Connection::Channel</a></li>
				
					<li><a href="../../../Net/SSH/Connection/Constants.html">Net::SSH::Connection::Constants</a></li>
				
					<li><a href="../../../Net/SSH/Connection/Session.html">Net::SSH::Connection::Session</a></li>
				
					<li><a href="../../../Net/SSH/Connection/Session/NilChannel.html">Net::SSH::Connection::Session::NilChannel</a></li>
				
					<li><a href="../../../Net/SSH/Connection/Term.html">Net::SSH::Connection::Term</a></li>
				
					<li><a href="../../../Net/SSH/Disconnect.html">Net::SSH::Disconnect</a></li>
				
					<li><a href="../../../Net/SSH/Exception.html">Net::SSH::Exception</a></li>
				
					<li><a href="../../../Net/SSH/HostKeyMismatch.html">Net::SSH::HostKeyMismatch</a></li>
				
					<li><a href="../../../Net/SSH/KeyFactory.html">Net::SSH::KeyFactory</a></li>
				
					<li><a href="../../../Net/SSH/KnownHosts.html">Net::SSH::KnownHosts</a></li>
				
					<li><a href="../../../Net/SSH/Loggable.html">Net::SSH::Loggable</a></li>
				
					<li><a href="../../../Net/SSH/Packet.html">Net::SSH::Packet</a></li>
				
					<li><a href="../../../Net/SSH/PromptMethods.html">Net::SSH::PromptMethods</a></li>
				
					<li><a href="../../../Net/SSH/PromptMethods/Clear.html">Net::SSH::PromptMethods::Clear</a></li>
				
					<li><a href="../../../Net/SSH/PromptMethods/Highline.html">Net::SSH::PromptMethods::Highline</a></li>
				
					<li><a href="../../../Net/SSH/PromptMethods/Termios.html">Net::SSH::PromptMethods::Termios</a></li>
				
					<li><a href="../../../Net/SSH/Proxy.html">Net::SSH::Proxy</a></li>
				
					<li><a href="../../../Net/SSH/Proxy/ConnectError.html">Net::SSH::Proxy::ConnectError</a></li>
				
					<li><a href="../../../Net/SSH/Proxy/Error.html">Net::SSH::Proxy::Error</a></li>
				
					<li><a href="../../../Net/SSH/Proxy/HTTP.html">Net::SSH::Proxy::HTTP</a></li>
				
					<li><a href="../../../Net/SSH/Proxy/SOCKS4.html">Net::SSH::Proxy::SOCKS4</a></li>
				
					<li><a href="../../../Net/SSH/Proxy/SOCKS5.html">Net::SSH::Proxy::SOCKS5</a></li>
				
					<li><a href="../../../Net/SSH/Proxy/UnauthorizedError.html">Net::SSH::Proxy::UnauthorizedError</a></li>
				
					<li><a href="../../../Net/SSH/Service.html">Net::SSH::Service</a></li>
				
					<li><a href="../../../Net/SSH/Service/Forward.html">Net::SSH::Service::Forward</a></li>
				
					<li><a href="../../../Net/SSH/Test.html">Net::SSH::Test</a></li>
				
					<li><a href="../../../Net/SSH/Test/Channel.html">Net::SSH::Test::Channel</a></li>
				
					<li><a href="../../../Net/SSH/Test/Extensions.html">Net::SSH::Test::Extensions</a></li>
				
					<li><a href="../../../Net/SSH/Test/Extensions/BufferedIo.html">Net::SSH::Test::Extensions::BufferedIo</a></li>
				
					<li><a href="../../../Net/SSH/Test/Extensions/Channel.html">Net::SSH::Test::Extensions::Channel</a></li>
				
					<li><a href="../../../Net/SSH/Test/Extensions/IO.html">Net::SSH::Test::Extensions::IO</a></li>
				
					<li><a href="../../../Net/SSH/Test/Extensions/IO/ClassMethods.html">Net::SSH::Test::Extensions::IO::ClassMethods</a></li>
				
					<li><a href="../../../Net/SSH/Test/Extensions/PacketStream.html">Net::SSH::Test::Extensions::PacketStream</a></li>
				
					<li><a href="../../../Net/SSH/Test/Kex.html">Net::SSH::Test::Kex</a></li>
				
					<li><a href="../../../Net/SSH/Test/LocalPacket.html">Net::SSH::Test::LocalPacket</a></li>
				
					<li><a href="../../../Net/SSH/Test/Packet.html">Net::SSH::Test::Packet</a></li>
				
					<li><a href="../../../Net/SSH/Test/RemotePacket.html">Net::SSH::Test::RemotePacket</a></li>
				
					<li><a href="../../../Net/SSH/Test/Script.html">Net::SSH::Test::Script</a></li>
				
					<li><a href="../../../Net/SSH/Test/Socket.html">Net::SSH::Test::Socket</a></li>
				
					<li><a href="../../../Net/SSH/Transport.html">Net::SSH::Transport</a></li>
				
					<li><a href="../../../Net/SSH/Transport/Algorithms.html">Net::SSH::Transport::Algorithms</a></li>
				
					<li><a href="../../../Net/SSH/Transport/CipherFactory.html">Net::SSH::Transport::CipherFactory</a></li>
				
					<li><a href="../../../Net/SSH/Transport/Constants.html">Net::SSH::Transport::Constants</a></li>
				
					<li><a href="../../../Net/SSH/Transport/HMAC.html">Net::SSH::Transport::HMAC</a></li>
				
					<li><a href="../../../Net/SSH/Transport/HMAC/Abstract.html">Net::SSH::Transport::HMAC::Abstract</a></li>
				
					<li><a href="../../../Net/SSH/Transport/HMAC/MD5.html">Net::SSH::Transport::HMAC::MD5</a></li>
				
					<li><a href="../../../Net/SSH/Transport/HMAC/MD5_96.html">Net::SSH::Transport::HMAC::MD5_96</a></li>
				
					<li><a href="../../../Net/SSH/Transport/HMAC/None.html">Net::SSH::Transport::HMAC::None</a></li>
				
					<li><a href="../../../Net/SSH/Transport/HMAC/SHA1.html">Net::SSH::Transport::HMAC::SHA1</a></li>
				
					<li><a href="../../../Net/SSH/Transport/HMAC/SHA1_96.html">Net::SSH::Transport::HMAC::SHA1_96</a></li>
				
					<li><a href="../../../Net/SSH/Transport/IdentityCipher.html">Net::SSH::Transport::IdentityCipher</a></li>
				
					<li><a href="../../../Net/SSH/Transport/Kex.html">Net::SSH::Transport::Kex</a></li>
				
					<li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroup1SHA1.html">Net::SSH::Transport::Kex::DiffieHellmanGroup1SHA1</a></li>
				
					<li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroupExchangeSHA1.html">Net::SSH::Transport::Kex::DiffieHellmanGroupExchangeSHA1</a></li>
				
					<li><a href="../../../Net/SSH/Transport/PacketStream.html">Net::SSH::Transport::PacketStream</a></li>
				
					<li><a href="../../../Net/SSH/Transport/ServerVersion.html">Net::SSH::Transport::ServerVersion</a></li>
				
					<li><a href="../../../Net/SSH/Transport/Session.html">Net::SSH::Transport::Session</a></li>
				
					<li><a href="../../../Net/SSH/Transport/State.html">Net::SSH::Transport::State</a></li>
				
					<li><a href="../../../Net/SSH/Verifiers.html">Net::SSH::Verifiers</a></li>
				
					<li><a href="../../../Net/SSH/Verifiers/Lenient.html">Net::SSH::Verifiers::Lenient</a></li>
				
					<li><a href="../../../Net/SSH/Verifiers/Null.html">Net::SSH::Verifiers::Null</a></li>
				
					<li><a href="../../../Net/SSH/Verifiers/Strict.html">Net::SSH::Verifiers::Strict</a></li>
				
					<li><a href="../../../Net/SSH/Version.html">Net::SSH::Version</a></li>
				
					<li><a href="../../../OpenSSL.html">OpenSSL</a></li>
				
					<li><a href="../../../OpenSSL/BN.html">OpenSSL::BN</a></li>
				
					<li><a href="../../../OpenSSL/PKey.html">OpenSSL::PKey</a></li>
				
					<li><a href="../../../OpenSSL/PKey/DH.html">OpenSSL::PKey::DH</a></li>
				
					<li><a href="../../../OpenSSL/PKey/DSA.html">OpenSSL::PKey::DSA</a></li>
				
					<li><a href="../../../OpenSSL/PKey/PKey.html">OpenSSL::PKey::PKey</a></li>
				
					<li><a href="../../../OpenSSL/PKey/RSA.html">OpenSSL::PKey::RSA</a></li>
				
					<li><a href="../../../String.html">String</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">Net::SSH::Transport::State</h1>

		<div id="description">
			<p>
Encapsulates state information about one end of an <a
href="../../SSH.html">SSH</a> connection. Such state includes the packet
sequence number, the algorithms in use, how many packets and blocks have
been processed since the last reset, and so forth. This class will never be
instantiated directly, but is used as part of the internal state of the <a
href="PacketStream.html">PacketStream</a> module.
</p>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		
		<div id="attribute-method-details" class="method-section section">
			<h3 class="section-header">Attributes</h3>

			
			<div id="socket-attribute-method" class="method-detail">
				<a name="socket"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">socket</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The socket object that owns this state object.
</p>
				
				</div>
			</div>
			
			<div id="sequence-number-attribute-method" class="method-detail">
				<a name="sequence_number"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">sequence_number</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The next packet sequence number for this socket endpoint.
</p>
				
				</div>
			</div>
			
			<div id="hmac-attribute-method" class="method-detail">
				<a name="hmac"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">hmac</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The hmac algorithm in use for this endpoint.
</p>
				
				</div>
			</div>
			
			<div id="compression-attribute-method" class="method-detail">
				<a name="compression"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">compression</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The compression algorithm in use for this endpoint.
</p>
				
				</div>
			</div>
			
			<div id="compression-level-attribute-method" class="method-detail">
				<a name="compression_level"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">compression_level</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The compression level to use when compressing data (or nil, for the
default).
</p>
				
				</div>
			</div>
			
			<div id="packets-attribute-method" class="method-detail">
				<a name="packets"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">packets</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The number of packets processed since the last call to <a
href="State.html#M000396">reset!</a>
</p>
				
				</div>
			</div>
			
			<div id="blocks-attribute-method" class="method-detail">
				<a name="blocks"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">blocks</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The number of data blocks processed since the last call to <a
href="State.html#M000396">reset!</a>
</p>
				
				</div>
			</div>
			
			<div id="cipher-attribute-method" class="method-detail">
				<a name="cipher"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">cipher</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The cipher algorithm in use for this socket endpoint.
</p>
				
				</div>
			</div>
			
			<div id="role-attribute-method" class="method-detail">
				<a name="role"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">role</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
The role that this state plays (either :client or :server)
</p>
				
				</div>
			</div>
			
			<div id="max-packets-attribute-method" class="method-detail">
				<a name="max_packets"></a>
				
				<a name="max_packets="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">max_packets</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
The maximum number of packets that this endpoint wants to process before
needing a rekey.
</p>
				
				</div>
			</div>
			
			<div id="max-blocks-attribute-method" class="method-detail">
				<a name="max_blocks"></a>
				
				<a name="max_blocks="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">max_blocks</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
The maximum number of blocks that this endpoint wants to process before
needing a rekey.
</p>
				
				</div>
			</div>
			
			<div id="rekey-limit-attribute-method" class="method-detail">
				<a name="rekey_limit"></a>
				
				<a name="rekey_limit="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">rekey_limit</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
The user-specified maximum number of bytes that this endpoint ought to
process before needing a rekey.
</p>
				
				</div>
			</div>
			
		</div>
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="new-method" class="method-detail ">
				<a name="M000379"></a>

				<div class="method-heading">
				
					<span class="method-name">new</span><span
						class="method-args">(socket, role)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Creates a new state object, belonging to the given socket. Initializes the
algorithms to &#8220;none&#8221;.
</p>
					

					
					<div class="method-source-code"
						id="new-source">
<pre>
    <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 54</span>
54:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">socket</span>, <span class="ruby-identifier">role</span>)
55:       <span class="ruby-ivar">@socket</span> = <span class="ruby-identifier">socket</span>
56:       <span class="ruby-ivar">@role</span> = <span class="ruby-identifier">role</span>
57:       <span class="ruby-ivar">@sequence_number</span> = <span class="ruby-ivar">@packets</span> = <span class="ruby-ivar">@blocks</span> = <span class="ruby-value">0</span>
58:       <span class="ruby-ivar">@cipher</span> = <span class="ruby-constant">CipherFactory</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value str">&quot;none&quot;</span>)
59:       <span class="ruby-ivar">@hmac</span> = <span class="ruby-constant">HMAC</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value str">&quot;none&quot;</span>)
60:       <span class="ruby-ivar">@compression</span> = <span class="ruby-keyword kw">nil</span>
61:       <span class="ruby-ivar">@compressor</span> = <span class="ruby-ivar">@decompressor</span> = <span class="ruby-keyword kw">nil</span>
62:       <span class="ruby-ivar">@next_iv</span> = <span class="ruby-value str">&quot;&quot;</span>
63:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="cleanup-method" class="method-detail ">
				<a name="M000397"></a>

				<div class="method-heading">
				
					<span class="method-name">cleanup</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Closes any the compressor and/or decompressor objects that have been
instantiated.
</p>
					

					
					<div class="method-source-code"
						id="cleanup-source">
<pre>
     <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 162</span>
162:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cleanup</span>
163:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@compressor</span>
164:         <span class="ruby-ivar">@compressor</span>.<span class="ruby-identifier">finish</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@compressor</span>.<span class="ruby-identifier">finished?</span>
165:         <span class="ruby-ivar">@compressor</span>.<span class="ruby-identifier">close</span>
166:       <span class="ruby-keyword kw">end</span>
167: 
168:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@decompressor</span>
169:         <span class="ruby-comment cmt"># we call reset here so that we don't get warnings when we try to</span>
170:         <span class="ruby-comment cmt"># close the decompressor</span>
171:         <span class="ruby-ivar">@decompressor</span>.<span class="ruby-identifier">reset</span>
172:         <span class="ruby-ivar">@decompressor</span>.<span class="ruby-identifier">close</span>
173:       <span class="ruby-keyword kw">end</span>
174: 
175:       <span class="ruby-ivar">@compressor</span> = <span class="ruby-ivar">@decompressor</span> = <span class="ruby-keyword kw">nil</span>
176:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="compress-method" class="method-detail ">
				<a name="M000394"></a>

				<div class="method-heading">
				
					<span class="method-name">compress</span><span
						class="method-args">(data)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Compresses the data. If no compression is in effect, this will just return
the data unmodified, otherwise it uses <a
href="State.html#M000389">compressor</a> to compress the data.
</p>
					

					
					<div class="method-source-code"
						id="compress-source">
<pre>
     <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 116</span>
116:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compress</span>(<span class="ruby-identifier">data</span>)
117:       <span class="ruby-identifier">data</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">to_s</span>
118:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">data</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">compression?</span>
119:       <span class="ruby-identifier">compressor</span>.<span class="ruby-identifier">deflate</span>(<span class="ruby-identifier">data</span>, <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">SYNC_FLUSH</span>)
120:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="compression--method" class="method-detail ">
				<a name="M000393"></a>

				<div class="method-heading">
				
					<span class="method-name">compression?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns true if data compression/decompression is enabled. This will return
true if :standard compression is selected, or if :delayed compression is
selected and the :authenticated hint has been received by the socket.
</p>
					

					
					<div class="method-source-code"
						id="compression--source">
<pre>
     <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 110</span>
110:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compression?</span>
111:       <span class="ruby-identifier">compression</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:standard</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">compression</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:delayed</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">hints</span>[<span class="ruby-identifier">:authenticated</span>])
112:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="compressor-method" class="method-detail ">
				<a name="M000389"></a>

				<div class="method-heading">
				
					<span class="method-name">compressor</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The compressor object to use when compressing data. This takes into account
the desired compression level.
</p>
					

					
					<div class="method-source-code"
						id="compressor-source">
<pre>
    <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 97</span>
97:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compressor</span>
98:       <span class="ruby-ivar">@compressor</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">Deflate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">compression_level</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">DEFAULT_COMPRESSION</span>)
99:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="decompress-method" class="method-detail ">
				<a name="M000395"></a>

				<div class="method-heading">
				
					<span class="method-name">decompress</span><span
						class="method-args">(data)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Deompresses the data. If no compression is in effect, this will just return
the data unmodified, otherwise it uses <a
href="State.html#M000390">decompressor</a> to decompress the data.
</p>
					

					
					<div class="method-source-code"
						id="decompress-source">
<pre>
     <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 124</span>
124:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompress</span>(<span class="ruby-identifier">data</span>)
125:       <span class="ruby-identifier">data</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">to_s</span>
126:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">data</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">compression?</span>
127:       <span class="ruby-identifier">decompressor</span>.<span class="ruby-identifier">inflate</span>(<span class="ruby-identifier">data</span>)
128:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="decompressor-method" class="method-detail ">
				<a name="M000390"></a>

				<div class="method-heading">
				
					<span class="method-name">decompressor</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The decompressor object to use when decompressing data.
</p>
					

					
					<div class="method-source-code"
						id="decompressor-source">
<pre>
     <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 102</span>
102:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompressor</span>
103:       <span class="ruby-ivar">@decompressor</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>)
104:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="final-cipher-method" class="method-detail ">
				<a name="M000387"></a>

				<div class="method-heading">
				
					<span class="method-name">final_cipher</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p class="missing-docs">(Not documented)</p>
					

					
					<div class="method-source-code"
						id="final-cipher-source">
<pre>
    <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 80</span>
80:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">final_cipher</span>
81:       <span class="ruby-identifier">result</span> = <span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">final</span>
82:       <span class="ruby-identifier">update_next_iv</span>(<span class="ruby-identifier">role</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:client</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-keyword kw">true</span>)
83:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
84:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="increment-method" class="method-detail ">
				<a name="M000388"></a>

				<div class="method-heading">
				
					<span class="method-name">increment</span><span
						class="method-args">(packet_length)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Increments the counters. The sequence number is incremented (and remapped
so it always fits in a 32-bit integer). The number of packets and blocks
are also incremented.
</p>
					

					
					<div class="method-source-code"
						id="increment-source">
<pre>
    <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 89</span>
89:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">packet_length</span>)
90:       <span class="ruby-ivar">@sequence_number</span> = (<span class="ruby-ivar">@sequence_number</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x</span><span class="ruby-constant">FFFFFFFF</span>
91:       <span class="ruby-ivar">@packets</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
92:       <span class="ruby-ivar">@blocks</span> <span class="ruby-operator">+=</span> (<span class="ruby-identifier">packet_length</span> <span class="ruby-operator">+</span> <span class="ruby-value">4</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">block_size</span>
93:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="needs-rekey--method" class="method-detail ">
				<a name="M000403"></a>

				<div class="method-heading">
				
					<span class="method-name">needs_rekey?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns true if the number of packets processed exceeds the maximum number
of packets, or if the number of blocks processed exceeds the maximum number
of blocks.
</p>
					

					
					<div class="method-source-code"
						id="needs-rekey--source">
<pre>
     <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 181</span>
181:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">needs_rekey?</span>
182:       <span class="ruby-identifier">max_packets</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">packets</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">max_packets</span> <span class="ruby-operator">||</span>
183:       <span class="ruby-identifier">max_blocks</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">blocks</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">max_blocks</span>
184:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="reset--method" class="method-detail ">
				<a name="M000396"></a>

				<div class="method-heading">
				
					<span class="method-name">reset!</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Resets the counters on the state object, but leaves the <a
href="State.html#sequence_number">sequence_number</a> unchanged. It also
sets defaults for and recomputes the <a
href="State.html#max_packets">max_packets</a> and <a
href="State.html#max_blocks">max_blocks</a> values.
</p>
					

					
					<div class="method-source-code"
						id="reset--source">
<pre>
     <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 133</span>
133:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset!</span>
134:       <span class="ruby-ivar">@packets</span> = <span class="ruby-ivar">@blocks</span> = <span class="ruby-value">0</span>
135: 
136:       <span class="ruby-ivar">@max_packets</span> <span class="ruby-operator">||=</span> <span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">31</span>
137: 
138:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">max_blocks</span>.<span class="ruby-identifier">nil?</span>
139:         <span class="ruby-comment cmt"># cargo-culted from openssh. the idea is that &quot;the 2^(blocksize*2)</span>
140:         <span class="ruby-comment cmt"># limit is too expensive for 3DES, blowfish, etc., so enforce a 1GB</span>
141:         <span class="ruby-comment cmt"># limit for small blocksizes.&quot;</span>
142: 
143:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">block_size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">16</span>
144:           <span class="ruby-ivar">@max_blocks</span> = <span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">block_size</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>)
145:         <span class="ruby-keyword kw">else</span>
146:           <span class="ruby-ivar">@max_blocks</span> = (<span class="ruby-value">1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">30</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">block_size</span>
147:         <span class="ruby-keyword kw">end</span>
148: 
149:         <span class="ruby-comment cmt"># if a limit on the # of bytes has been given, convert that into a</span>
150:         <span class="ruby-comment cmt"># minimum number of blocks processed.</span>
151: 
152:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rekey_limit</span>
153:           <span class="ruby-ivar">@max_blocks</span> = [<span class="ruby-ivar">@max_blocks</span>, <span class="ruby-identifier">rekey_limit</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">block_size</span>].<span class="ruby-identifier">min</span>
154:         <span class="ruby-keyword kw">end</span>
155:       <span class="ruby-keyword kw">end</span>
156: 
157:       <span class="ruby-identifier">cleanup</span>
158:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="set-method" class="method-detail ">
				<a name="M000380"></a>

				<div class="method-heading">
				
					<span class="method-name">set</span><span
						class="method-args">(values)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
A convenience method for quickly setting multiple values in a single
command.
</p>
					

					
					<div class="method-source-code"
						id="set-source">
<pre>
    <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 67</span>
67:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">values</span>)
68:       <span class="ruby-identifier">values</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
69:         <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-node">&quot;@#{key}&quot;</span>, <span class="ruby-identifier">value</span>)
70:       <span class="ruby-keyword kw">end</span>
71:       <span class="ruby-identifier">reset!</span>
72:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="update-cipher-method" class="method-detail ">
				<a name="M000381"></a>

				<div class="method-heading">
				
					<span class="method-name">update_cipher</span><span
						class="method-args">(data)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p class="missing-docs">(Not documented)</p>
					

					
					<div class="method-source-code"
						id="update-cipher-source">
<pre>
    <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 74</span>
74:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_cipher</span>(<span class="ruby-identifier">data</span>)
75:       <span class="ruby-identifier">result</span> = <span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">data</span>)
76:       <span class="ruby-identifier">update_next_iv</span>(<span class="ruby-identifier">role</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:client</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">data</span>)
77:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
78:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="update-next-iv-method" class="method-detail ">
				<a name="M000404"></a>

				<div class="method-heading">
				
					<span class="method-name">update_next_iv</span><span
						class="method-args">(data, reset=false)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p class="missing-docs">(Not documented)</p>
					

					
					<div class="method-source-code"
						id="update-next-iv-source">
<pre>
     <span class="ruby-comment cmt"># File lib/net/ssh/transport/state.rb, line 188</span>
188:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_next_iv</span>(<span class="ruby-identifier">data</span>, <span class="ruby-identifier">reset</span>=<span class="ruby-keyword kw">false</span>)
189:         <span class="ruby-ivar">@next_iv</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">data</span>
190:         <span class="ruby-ivar">@next_iv</span> = <span class="ruby-ivar">@next_iv</span>[<span class="ruby-operator">-</span><span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">iv_len</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
191: 
192:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">reset</span>
193:           <span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">reset</span>
194:           <span class="ruby-identifier">cipher</span>.<span class="ruby-identifier">iv</span> = <span class="ruby-ivar">@next_iv</span>
195:         <span class="ruby-keyword kw">end</span>
196: 
197:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">data</span>
198:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

