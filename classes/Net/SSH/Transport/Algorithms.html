<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Net::SSH::Transport::Algorithms</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Net::SSH::Transport::Algorithms 
            
                <span class="parent">&lt; 
                    
                    <a href="../../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../../files/lib/net/ssh/transport/algorithms_rb.html">lib/net/ssh/transport/algorithms.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Implements the higher-level logic behind an <a
href="../../SSH.html">SSH</a> key-exchange. It handles both the initial
exchange, as well as subsequent re-exchanges (as needed). It also
encapsulates the negotiation of the algorithms, and provides a single point
of access to the negotiated algorithms.
</p>
<p>
You will never instantiate or reference this directly. It is used
internally by the transport layer.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000301">[]</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000300">accept_kexinit</a>,</li>
                
                <li><a href="#M000303">allow?</a>,</li>
                
                <li><a href="#M000294">allowed_packet?</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000304">initialized?</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000297">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000302">pending?</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000299">rekey!</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../Authentication.html">Net::SSH::Authentication</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="../../SSH.html">Net::SSH</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">ALGORITHMS</td>
            <td>=</td>
            <td class="attr-value">{       :host_key    =&gt; %w(ssh-rsa ssh-dss),       :kex         =&gt; %w(diffie-hellman-group-exchange-sha1                          diffie-hellman-group1-sha1),       :encryption  =&gt; %w(aes128-cbc 3des-cbc blowfish-cbc cast128-cbc                          aes192-cbc aes256-cbc rijndael-cbc@lysator.liu.se                          idea-cbc none arcfour128 arcfour256),       :hmac        =&gt; %w(hmac-sha1 hmac-md5 hmac-sha1-96 hmac-md5-96 none),       :compression =&gt; %w(none zlib@openssh.com zlib),       :language    =&gt; %w()      }</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Define the default algorithms, in order of preference, supported by <a
href="../../SSH.html">Net::SSH</a>.
</p>
</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>session</td>
            <td class='attr-desc'><p>
The underlying transport layer session that supports this object
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>options</td>
            <td class='attr-desc'><p>
The hash of options used to initialize this object
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>kex</td>
            <td class='attr-desc'><p>
The kex algorithm to use settled on between the client and server.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>host_key</td>
            <td class='attr-desc'><p>
The type of host key that will be used for this session.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>encryption_client</td>
            <td class='attr-desc'><p>
The type of the cipher to use to encrypt packets sent from the client to
the server.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>encryption_server</td>
            <td class='attr-desc'><p>
The type of the cipher to use to decrypt packets arriving from the server.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>hmac_client</td>
            <td class='attr-desc'><p>
The type of <a href="HMAC.html">HMAC</a> to use to sign packets sent by the
client.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>hmac_server</td>
            <td class='attr-desc'><p>
The type of <a href="HMAC.html">HMAC</a> to use to validate packets
arriving from the server.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>compression_client</td>
            <td class='attr-desc'><p>
The type of compression to use to compress packets being sent by the
client.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>compression_server</td>
            <td class='attr-desc'><p>
The type of compression to use to decompress packets arriving from the
server.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>language_client</td>
            <td class='attr-desc'><p>
The language that will be used in messages sent by the client.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>language_server</td>
            <td class='attr-desc'><p>
The language that will be used in messages sent from the server.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>algorithms</td>
            <td class='attr-desc'><p>
The hash of algorithms preferred by the client, which will be told to the
server during algorithm negotiation.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>session_id</td>
            <td class='attr-desc'><p>
The session-id for this session, as decided during the initial key
exchange.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000294">
                    
                    <a name="M000294"></a><b>allowed_packet?</b>(packet)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the given packet can be processed during a key-exchange.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000294_source')" id="l_M000294_source">show</a>
                        
                        | <a href="http://github.com/delano/net-ssh/blob/21f2d1938abd068c58c5f2eafbd42ec954443c2c/lib/net/ssh/transport/algorithms.rb#L81" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000294_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/net/ssh/transport/algorithms.rb, line 81</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">allowed_packet?</span>(<span class="ruby-identifier">packet</span>)
      ( <span class="ruby-value">1</span><span class="ruby-operator">..</span> <span class="ruby-value">4</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">packet</span>.<span class="ruby-identifier">type</span>) <span class="ruby-operator">||</span>
      ( <span class="ruby-value">6</span><span class="ruby-operator">..</span><span class="ruby-value">19</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">packet</span>.<span class="ruby-identifier">type</span>) <span class="ruby-operator">||</span>
      (<span class="ruby-value">21</span><span class="ruby-operator">..</span><span class="ruby-value">49</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">packet</span>.<span class="ruby-identifier">type</span>)
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000297">
                    
                    <a name="M000297"></a><b>new</b>(session, options={})
                    
                </div>
                
                <div class="description">
                  <p>
Instantiates a new <a href="Algorithms.html">Algorithms</a> object, and
prepares the hash of preferred algorithms based on the options parameter
and the <a href="Algorithms.html#ALGORITHMS">ALGORITHMS</a> constant.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000297_source')" id="l_M000297_source">show</a>
                        
                        | <a href="http://github.com/delano/net-ssh/blob/21f2d1938abd068c58c5f2eafbd42ec954443c2c/lib/net/ssh/transport/algorithms.rb#L89" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000297_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/net/ssh/transport/algorithms.rb, line 89</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>, <span class="ruby-identifier">options</span>={})
      <span class="ruby-ivar">@session</span> = <span class="ruby-identifier">session</span>
      <span class="ruby-ivar">@logger</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">logger</span>
      <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
      <span class="ruby-ivar">@algorithms</span> = {}
      <span class="ruby-ivar">@pending</span> = <span class="ruby-ivar">@initialized</span> = <span class="ruby-keyword kw">false</span>
      <span class="ruby-ivar">@client_packet</span> = <span class="ruby-ivar">@server_packet</span> = <span class="ruby-keyword kw">nil</span>
      <span class="ruby-identifier">prepare_preferred_algorithms!</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000301">
                    
                    <a name="M000301"></a><b>[]</b>(key)
                    
                </div>
                
                <div class="description">
                  <p>
A convenience method for accessing the list of preferred types for a
specific algorithm (see <a
href="Algorithms.html#algorithms">algorithms</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000301_source')" id="l_M000301_source">show</a>
                        
                        | <a href="http://github.com/delano/net-ssh/blob/21f2d1938abd068c58c5f2eafbd42ec954443c2c/lib/net/ssh/transport/algorithms.rb#L126" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000301_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/net/ssh/transport/algorithms.rb, line 126</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)
      <span class="ruby-identifier">algorithms</span>[<span class="ruby-identifier">key</span>]
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000300">
                    
                    <a name="M000300"></a><b>accept_kexinit</b>(packet)
                    
                </div>
                
                <div class="description">
                  <p>
Called by the transport layer when a KEXINIT packet is recieved, indicating
that the server wants to exchange keys. This can be spontaneous, or it can
be in response to a client-initiated rekey request (see <a
href="Algorithms.html#M000299">rekey!</a>). Either way, this will block
until the key exchange completes.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000300_source')" id="l_M000300_source">show</a>
                        
                        | <a href="http://github.com/delano/net-ssh/blob/21f2d1938abd068c58c5f2eafbd42ec954443c2c/lib/net/ssh/transport/algorithms.rb#L113" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000300_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/net/ssh/transport/algorithms.rb, line 113</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_kexinit</span>(<span class="ruby-identifier">packet</span>)
      <span class="ruby-identifier">info</span> { <span class="ruby-value str">&quot;got KEXINIT from server&quot;</span> }
      <span class="ruby-ivar">@server_data</span> = <span class="ruby-identifier">parse_server_algorithm_packet</span>(<span class="ruby-identifier">packet</span>)
      <span class="ruby-ivar">@server_packet</span> = <span class="ruby-ivar">@server_data</span>[<span class="ruby-identifier">:raw</span>]
      <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">pending?</span>
        <span class="ruby-identifier">send_kexinit</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">proceed!</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000303">
                    
                    <a name="M000303"></a><b>allow?</b>(packet)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if no exchange is pending, and otherwise returns true or false
depending on whether the given packet is of a type that is allowed during a
key exchange.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000303_source')" id="l_M000303_source">show</a>
                        
                        | <a href="http://github.com/delano/net-ssh/blob/21f2d1938abd068c58c5f2eafbd42ec954443c2c/lib/net/ssh/transport/algorithms.rb#L142" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000303_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/net/ssh/transport/algorithms.rb, line 142</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">allow?</span>(<span class="ruby-identifier">packet</span>)
      <span class="ruby-operator">!</span><span class="ruby-identifier">pending?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Algorithms</span>.<span class="ruby-identifier">allowed_packet?</span>(<span class="ruby-identifier">packet</span>)
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000304">
                    
                    <a name="M000304"></a><b>initialized?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the algorithms have been negotiated at all.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000304_source')" id="l_M000304_source">show</a>
                        
                        | <a href="http://github.com/delano/net-ssh/blob/21f2d1938abd068c58c5f2eafbd42ec954443c2c/lib/net/ssh/transport/algorithms.rb#L147" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000304_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/net/ssh/transport/algorithms.rb, line 147</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialized?</span>
      <span class="ruby-ivar">@initialized</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000302">
                    
                    <a name="M000302"></a><b>pending?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if a key-exchange is pending. This will be true from
the moment either the client or server requests the key exchange, until the
exchange completes. While an exchange is pending, only a limited number of
packets are allowed, so event processing essentially stops during this
period.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000302_source')" id="l_M000302_source">show</a>
                        
                        | <a href="http://github.com/delano/net-ssh/blob/21f2d1938abd068c58c5f2eafbd42ec954443c2c/lib/net/ssh/transport/algorithms.rb#L135" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000302_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/net/ssh/transport/algorithms.rb, line 135</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pending?</span>
      <span class="ruby-ivar">@pending</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000299">
                    
                    <a name="M000299"></a><b>rekey!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Request a rekey operation. This will return immediately, and does not
actually perform the rekey operation. It does cause the session to change
state, however&#8212;until the key exchange finishes, no new packets will
be processed.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000299_source')" id="l_M000299_source">show</a>
                        
                        | <a href="http://github.com/delano/net-ssh/blob/21f2d1938abd068c58c5f2eafbd42ec954443c2c/lib/net/ssh/transport/algorithms.rb#L103" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000299_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/net/ssh/transport/algorithms.rb, line 103</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rekey!</span>
      <span class="ruby-ivar">@client_packet</span> = <span class="ruby-ivar">@server_packet</span> = <span class="ruby-keyword kw">nil</span>
      <span class="ruby-ivar">@initialized</span> = <span class="ruby-keyword kw">false</span>
      <span class="ruby-identifier">send_kexinit</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    